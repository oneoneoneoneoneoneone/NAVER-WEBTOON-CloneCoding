# :pushpin: NAVER-WEBTOON-CloneCoding
ë„¤ì´ë²„ ì›¹íˆ° ì•±(ver 1.54.1) í™”ë©´ í´ë¡ ì½”ë”©
>ì œì‘ ê¸°ê°„: 2022.07 ~ 2022.12</br>
>ì°¸ì—¬ ì¸ì›: ê°œì¸ í”„ë¡œì íŠ¸


</br>


## ê¸°ìˆ  ìŠ¤íƒ
- UIKit / SnapKit


</br>


## í•µì‹¬ ê¸°ëŠ¥ XX êµ¬ì¡°. í”„ë¡œì íŠ¸ ì„¤ëª…..
### 1. í™”ë©´

|<img src="https://user-images.githubusercontent.com/94464179/220561401-e56a2766-7b70-478c-bbf8-3a6bcd63c37e.png" width="90%" height="90%" alt>|<img src="https://user-images.githubusercontent.com/94464179/220561408-29ae03e1-9fcc-4c8e-b8d3-44d9be4c4730.png" width="90%" height="90%" alt>|<img src="https://user-images.githubusercontent.com/94464179/220561412-e0ddcb22-991f-46d3-aa17-d6b9050ad111.png" width="90%" height="90%" alt>|<img src="https://user-images.githubusercontent.com/94464179/220561422-91dc1c58-e4ab-4963-bc9a-b16ca549e0d6.png" width="85%" height="85%" alt>|
|:--:|:--:|:--:|:--:|
| *ì›¹íˆ°(ë©”ì¸)* | *ì¶”ì²œì™„ê²°* | *ë² ìŠ¤íŠ¸ë„ì „* | *My* |
|<img src="https://user-images.githubusercontent.com/94464179/220561419-8d1abd98-730b-4ff6-a096-c770cf7ef22f.png" width="90%" height="90%" alt>|<img src="https://user-images.githubusercontent.com/94464179/220561427-cd08f77e-cb39-4b7b-abfa-879b33011928.png" width="90%" height="90%" alt>|<img src="https://user-images.githubusercontent.com/94464179/220561429-4782190d-d739-467b-b482-449d8c211b02.png" width="90%" height="90%" alt>|<img src="https://user-images.githubusercontent.com/94464179/224633114-73e46154-d33a-4dca-a165-cf71e08d7638.png" width="85%" height="85%" alt>|
| *ë”ë³´ê¸°* | *ê²€ìƒ‰* | *ìƒì„¸* | *ì›¹ë·°* |


</br>


### 2. View

- **ì˜¤í†  ë ˆì´ì•„ì›ƒ**
  - SnapKit ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ í™”ë©´ ë ˆì´ì•„ì›ƒì„ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
  
- **ë‹¤ì–‘í•œ ë·°ì»¨íŠ¸ë¡¤ëŸ¬ ì‚¬ìš©**
  - ì›¹íˆ°(ë©”ì¸)í™”ë©´ì€ ìš”ì¼ë³„ë¡œ ê°™ì€ ì½œë ‰ì…˜ë·°ë¥¼ ì¬ì‚¬ìš©í•˜ì—¬ ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ë³´ì—¬ì£¼ê¸°ìœ„í•´ UIPageViewControllerë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
  - ì›¹íˆ°(ë©”ì¸)í™”ë©´ì€ ì—¬ëŸ¬ í˜•íƒœì˜ ì½œë ‰ì…˜ë·°ê°€ í•œ í™”ë©´ì— í•„ìš”í•œ í˜•íƒœë¡œ, ì½œë ‰ì…˜ë·° ë ˆì´ì•„ì›ƒìœ¼ë¡œ UICollectionViewCompositionalLayoutì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ì–‘í•œ ë ˆì´ì•„ì›ƒì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.
  
- **í™”ë©´ ì´ë™**
  - ê¸°ë³¸ ì œìŠ¤ì³ ì‚¬ìš©ê³¼ í™”ë©´ê°„ ì´ë™ì„ ìì—°ìŠ¤ëŸ½ê²Œ ë³´ì—¬ì£¼ë„ë¡ NavigationViewControllerì˜ push, pop ë©”ì†Œë“œë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.


</br>


### 3. API ì¡°íšŒ
  
- ì•± ìµœì´ˆ ë¡œë“œ ì‹œ ë„¤ì´ë²„ ê²€ìƒ‰ APIë¡œ ì±… ì •ë³´ë¥¼ ì¡°íšŒí•˜ì—¬ ë°ì´í„°ë¥¼ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
  
- **API í†µì‹ ** 
  - ì„œë²„í†µì‹ ì€ URLSession ì‚¬ìš©
  - í…ŒìŠ¤í¬ ë‚´ë¶€ì—ì„œ Response dataì— ë§ì¶˜ Books êµ¬ì¡°ì²´ë¡œ íŒŒì‹±
  - LocalNetwork.swift ì½”ë“œ í™•ì¸: [ğŸ”—](https://github.com/oneoneoneoneoneoneone/NAVER-WEBTOON-CloneCoding/blob/main/NaverWebtoonCloneCoding/Network/LocalNetwork.swift)


</br>


### 5. Repository

- **User Defaults** 
  - Repository.swift ì½”ë“œ í™•ì¸: [ğŸ”—](https://github.com/oneoneoneoneoneoneone/NAVER-WEBTOON-CloneCoding/blob/main/NaverWebtoonCloneCoding/Util/Repository.swift)
  
- ì €ì¥í•˜ëŠ” ë°ì´í„° ëª©ë¡ì…ë‹ˆë‹¤.
  - Item - ì•± ìµœì´ˆ ì‹¤í–‰ì‹œ ì €ì¥í•˜ëŠ” ì‘í’ˆ(ì±…) ì •ë³´
  - User - ê´€ì‹¬ì‘í’ˆ ì¶”ê°€ë¥¼ ìœ„í•œ ê¸°ë³¸ ì‚¬ìš©ì ì •ë³´
  - LikeItem - ê´€ì‹¬ì‘í’ˆ ì¶”ê°€ ì •ë³´
  - searchLog - ê²€ìƒ‰ì–´ ê¸°ë¡
  <img src="https://user-images.githubusercontent.com/94464179/220568828-228645e4-0024-4978-a867-721ffb86488e.png"  width="50%" height="50%" alt>

</div>
</details>


</br>


## 
### 1. ë©”ì¸ ë ˆì´ì•„ì›ƒ êµ¬ì„± ë¬¸ì œ

- ë©”ì¸ ë ˆì´ì•„ì›ƒì„ êµ¬ì„±í•˜ëŠ” pageViewControllerì— ê³ ì • ë†’ì´ë¥¼ ì„¤ì •í•˜ê²Œë˜ë©´ í˜ì´ì§€ë³„ë¡œ ë°ì´í„° ê°¯ìˆ˜ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì—, ì¼ë¶€ í˜ì´ì§€ë“¤ì´ ë°”ë‹¥ì´ ì˜ë ¤ë³´ì´ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.
  <details>
  <summary><b>ê°œì„ ëœ ì½”ë“œ</b></summary>
  <div markdown="1">

    - í˜„ì¬ ì„ íƒ ëœ pageViewControllerì˜ viewControllerê°€ ë³€ê²½ë˜ì–´ í™”ë©´ì— ë„ìš¸ ë•Œ(bind)ë§ˆë‹¤ viewControllerì˜ ë†’ì´ì— ë§ê²Œ pageViewController ë†’ì´ê°€ ë³€ê²½ë˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤. 
    ~~~Swift
    //MainViewController
      //ì„ ì–¸
      private var pageViewHeightConstraint: NSLayoutConstraint?

      //ì»¨íŠ¸ë¡¤ ë ˆì´ì•„ì›ƒ ì„¤ì •
      private func setLayout(){
          dayPageViewController.view.snp.makeConstraints{
              $0.top.equalTo(dayCollectionView.snp.bottom).offset(1)
              $0.leading.trailing.bottom.equalToSuperview()
          }
          pageViewHeightConstraint =    pageViewController.view.heightAnchor.constraint(equalToConstant: 250)
          pageViewHeightConstraint?.isActive = true
    }
      //í˜„ì¬ í˜ì´ì§€ê°€ ë³€ê²½ë  ë•Œ ê° ì»¨íŠ¸ë¡¤(í˜ì´ì§€ë·°, ì½œë ‰ì…˜ë·°)ì— ì—…ë°ì´íŠ¸
      private func bind(pageViewController: UIPageViewController, oldValue: Int, newValue: Int, animated: Bool){
          pageViewHeightConstraint?.constant = CGFloat(3*60 + 210)
    }
    ~~~

  </div>
  </details>


- ìŠ¤í¬ë¡¤ì„ ì¼ì •ë²”ìœ„ê¹Œì§€ ë‚´ë¦¬ì§€ ì•Šìœ¼ë©´ ë‚´ë ¤ì˜¤ë˜ ë„¤ë¹„ê²Œì´ì…˜ë°”ê°€ ë‹¤ì‹œ ìœ„ë¡œ ìˆ¨ê²¨ì ¸ì•¼í•˜ê³ , ìŠ¤í¬ë¡¤ì„ ì™„ì „íˆ ë‚´ë ¸ì„ ë•Œ ìš”ì¼ì»¬ë ‰ì…˜ë·°ê°€ ë„¤ë¹„ê²Œì´ì…˜ë°” ë°”ë¡œ ì•„ë˜ì— ê³ ì •ë˜ì–´ì•¼í–ˆìŠµë‹ˆë‹¤.
  <details>
  <summary><b>ê°œì„ ëœ ì½”ë“œ</b></summary>
  <div markdown="1">

    - ì½œë ‰ì…˜ë·°ë¥¼ ìŠ¤í¬ë¡¤ì„ í• ë•Œ í˜¸ì¶œë˜ëŠ” Delegate ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ scrollView.contentOffset.yê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ì½œë ‰ì…˜ë·°ì˜ yìœ„ì¹˜ê°’ê³¼ ë„¤ë¹„ê²Œì´ì…˜ë°”ì˜ yìœ„ì¹˜ê°’ì„ ì¡°ì •í•´ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
    ~~~Swift
    //MainViewController
      extension MainViewController: UIScrollViewDelegate{
          //ìŠ¤í¬ë¡¤ì´ ë  ë•Œë§ˆë‹¤ í˜¸ì¶œë˜ëŠ” ë©”ì†Œë“œ
          func scrollViewDidScroll(_ scrollView: UIScrollView) {
              //ìŠ¤í¬ë¡¤ ì‹œ ìƒìœ„ì—¬ë°±ì´ ì—†ë„ë¡ ê³ ì •
              if scrollView.contentOffset.y <= 0{
                  scrollView.contentOffset.y = 0

                  return
              }

              //ìŠ¤í¬ë¡¤ì„ ì¼ì •ë²”ìœ„ ì´ìƒ ë‚´ë ¸ì„ ë•Œ, dayCollectionViewë¥¼ ë„¤ë¹„ê²Œì´ì…˜ë°” ë°”ë¡œ ì•„ë˜ì— ê³ ì •
              if scrollView.contentOffset.y > 200 - view.safeAreaInsets.top{
                  dayCollectionView.frame.origin.y = scrollView.contentOffset.y + view.safeAreaInsets.top

                  let nv = self.navigationController as! MainNavigationView

                  nv.setNavigationViewHidden(hidden: false)
              }
              else{
                  dayCollectionView.frame.origin.y = 200// - statusBarHeight

                  let nv = self.navigationController as! MainNavigationView

                  nv.setNavigationViewHidden(hidden: true)
              }
              //-statusBarMargin) navigationBarë¥¼ ìˆ¨ê¸°ì§€ ì•Šê³  ì•ˆë³´ì´ê²Œí•˜ëŠ” y ê°’
              var headerConstant = scrollView.contentOffset.y - statusBarMargin

              headerConstant = headerConstant > view.safeAreaInsets.top - statusBarMargin ? view.safeAreaInsets.top - statusBarMargin : (headerConstant - Const.Size.HeaderMinHeight)

              self.navigationController?.navigationBar.layer.position.y = headerConstant// < -15 ? -22 : headerConstant
          }
      }
    ~~~

  </div>
  </details>


</br>


### 2. ë¼ë²¨ì— ê°•ì¡°ì†ì„± ì£¼ê¸°

- CollectionViewì˜ í—¤ë”ì— ìˆëŠ” ì§§ì€ Labelì˜ ë‹‰ë„¤ì„ì´ë‚˜ ì¼ë¶€ë¶„ë§Œ ë³¼ë“œì²´ or ìƒ‰ìƒì„ ì£¼ì–´ ê°•ì¡°í•´ì•¼í–ˆìŠµë‹ˆë‹¤.
  <details>
  <summary><b>ê°œì„ ëœ ì½”ë“œ</b></summary>
  <div markdown="1">

    - í•œ ì¤„ ì§œë¦¬ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ê°œì˜ ë¼ë²¨ë¡œ ë‚˜ëˆ ì•¼í•˜ëŠ”ì¤„ ì•Œì•˜ìœ¼ë‚˜, NSMutableAttributedStringì„ ì ìš©í•˜ì—¬ ê°„ë‹¨í•˜ê²Œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
    ~~~Swift
    //MainDayPageViewController
      let defaultAttributes: [NSAttributedString.Key: Any] = [
              .foregroundColor: UIColor.label,
              .font: UIFont.systemFont(ofSize: 16, weight: .regular)
          ]
          let boldAttributes: [NSAttributedString.Key: Any] = [
              .foregroundColor: UIColor.label,
              .font: UIFont.systemFont(ofSize: 16, weight: .semibold)
          ]

      let text = NSMutableAttributedString(string: "\(id)ë‹˜, ì´ ì›¹íˆ°ë“¤\nìµœì‹  ì´ì•¼ê¸°ë¥¼ ë†“ì¹˜ê³  ê³„ì‹  ê²ƒ ê°™ì•„ìš”!", attributes: defaultAttributes)
      text.addAttributes(boldAttributes, range: NSRange(location: 0, length: id.count))
      text.addAttributes(boldAttributes, range: NSRange(location: text.length - 13,
    ~~~

  </div>
  </details>


</br>

  
### 3. ì„œì¹˜ë°”ì˜ ìŠ¤ì½”í”„ë°” ìœ„ì¹˜ ì§€ì •

- SearchBarì˜ scopeBarë¥¼ ì‚¬ìš©í–ˆì„ ë•Œ, ì·¨ì†Œë²„íŠ¼ì´ ì„œì¹˜ë°” ì˜†ì´ ì•„ë‹Œ ë‘ ê°ì²´ ì‚¬ì´ì˜ ì˜†ì— ìœ„ì¹˜í•˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.
    - ì»¤ìŠ¤í…€ì„œì¹˜ë°”ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
    - ìŠ¤ì½”í”„ë°”ì— í•´ë‹¹í•˜ëŠ” ì»¨íŠ¸ë¡¤ì€ UISegmentedControlë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
    - CustomSearchViewController.swift ì½”ë“œ í™•ì¸: [ğŸ”—](https://github.com/oneoneoneoneoneoneone/NAVER-WEBTOON-CloneCoding/blob/main/NaverWebtoonCloneCoding/Scene/CustomUI/CustomSearchViewController.swift)


</br>


### 4. ìƒì„¸í™”ë©´ ë²„íŠ¼ ìƒ‰ê¹”

- ìƒì„¸í™”ë©´ì—ì„œ ì´ë¯¸ì§€ ìœ„ì— ìœ„ì¹˜í•œ +ê´€ì‹¬ë²„íŠ¼ì˜ ìƒ‰ê¹”ì„ ì ìš©í•´ì•¼í•˜ëŠ”ë° ì´ë¯¸ì§€ë³„ë¡œ ì–´ìš¸ë¦¬ëŠ” ìƒ‰ê¹”ì„ ì¨ì•¼í–ˆìŠµë‹ˆë‹¤.
  <details>
  <summary><b>ê°œì„ ëœ ì½”ë“œ</b></summary>
  <div markdown="1">
    
    - ì´ë¯¸ì§€ì˜ íŠ¹ì • ìœ„ì¹˜ì˜ ìƒ‰ê¹”ì„ ë”°ì„œ ë²„íŠ¼ì˜ ìƒ‰ê¹”ì„ ì ìš©í•˜ê³ , ë²„íŠ¼ì˜ ë¼ë²¨ì€ ê·¸ë¥¼ ë°˜ì „ì‹œí‚¨ ê°’ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.
    ~~~Swift
    //DetailViewController
      backgroundView.backgroundColor = imageView.image?.getPixelColor(pos: CGPoint(x: 0, y: 0))
      likeLabel.layer.backgroundColor = imageView.image?.getPixelColor(pos: CGPoint(x: 0, y: 0)).cgColor
    ~~~

    - extension UIImage ì½”ë“œ í™•ì¸: [ğŸ”—](https://github.com/oneoneoneoneoneoneone/NAVER-WEBTOON-CloneCoding/blob/main/NaverWebtoonCloneCoding/Scene/CustomUI/UIImage.swift)

  </div>
  </details>
  
  
</br>

